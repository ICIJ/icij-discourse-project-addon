<script type="text/discourse-plugin" version="0.8">
    const container = Discourse.__container__;

    function topicGroupNames () {
      const { model } = container.lookup('controller:topic');
      return model && model.category ? model.category.group_names : []
    }

    function projectGroupNames () {
      const { extras } = container.lookup('controller:group').model || {};
      return extras && extras.icij_group_names ? extras.icij_group_names : []
    }

    function groupNames () {
      const names = _.flatten(topicGroupNames())
      return _.unique(names)
    }

    api.decorateWidget("home-logo:after", helper => {
      const items = _.map(groupNames(), group_name => {
        return helper.h('a.header-projects-item', { href: '/groups/' + group_name + '/categories' }, group_name)
      });
      return helper.h('div.header-projects', items[0]);
    });
</script>
